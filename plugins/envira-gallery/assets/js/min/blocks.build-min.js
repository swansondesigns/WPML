!function(e){function l(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,l),n.l=!0,n.exports}var t={};l.m=e,l.c=t,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},l.p="",l(l.s=0)}([function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),t(1)},function(e,l,t){"use strict";var a=t(2),n=(t.n(a),t(3)),r=(t.n(n),t(4)),o=(t.n(r),t(5)),i=t(6),s=wp.i18n.__,c=wp.blocks.registerBlockType,u=wp.editor,g=u.InspectorControls,b=(u.AlignmentToolbar,u.ColorPalette,u.BlockControls,u.RichText,u.MediaUpload,wp.components),d=b.PanelBody,p=(b.Toolbar,b.RangeControl,b.Dashicon,b.SelectControl),m=(b.Button,b.TextControl,b.ToggleControl),v=b.Placeholder,_=(b.withAPIData,b.withFallbackStyles,wp.element),y=(_.Component,_.RawHTML);c("envira/envira-gallery",{title:s("Envira Gallery"),description:s("Select a gallery below to add it to your page."),icon:o.a,category:"embed",keywords:[s("Envira Gallery"),s("Photo"),s("Image")],attributes:{galleryId:{type:"string",shortcode:function(e){var l=e.named.id;return parseInt(l)}},columns:{type:"string","default":0},content:{type:"array",selector:"p"},text:{type:"string"},alignment:{type:"string"},preserveColor:{type:"toggle","default":!0},lightbox_enabled:{type:"boolean","default":!0},lazyload_enabled:{type:"boolean","default":!0},titles_enabled:{type:"boolean","default":!0},captions_enabled:{type:"boolean","default":!0},sort_order:{type:"string","default":""},lightbox_theme:{type:"string","default":"base_dark"},envira_gallery_gutenberg_data:{type:"string",source:"meta",meta:"envira_gallery_gutenberg_data"}},edit:function(e){var l=e.attributes,t=l.galleryId,a=l.columns,n=(l.content,l.text,l.alignment,l.style,l.lightbox_enabled),r=l.lazyload_enabled,o=l.titles_enabled,c=l.captions_enabled,u=l.sort_order,b=l.lightbox_theme,_=(l.envira_gallery_gutenberg_data,e.focus,e.isSelected),y=(e.className,e.setFocus,function(l,t){console.log("onUpdateGutenbergData triggered 12345"),console.log("item"),console.log(l),console.log("value"),console.log(t);var a=e.attributes;a[l]=t,delete a.gutenberg_data,console.log("gutenberg_data_test"),console.log(a),e.setAttributes({envira_gallery_gutenberg_data:JSON.stringify(a)})}),h=function(l){e.setAttributes({galleryId:l}),console.log("UPDATING envira_gallery_gutenberg_data: galleryId"),y("galleryId",l)},w=function(){e.setAttributes({lazyload_enabled:!r}),console.log("UPDATING envira_gallery_gutenberg_data: lazyload_enabled"),y("lazyload_enabled",!r)},f=function(){e.setAttributes({titles_enabled:!o}),console.log("UPDATING envira_gallery_gutenberg_data: titles_enabled"),y("titles_enabled",!o)},E=function(){e.setAttributes({captions_enabled:!c}),console.log("UPDATING envira_gallery_gutenberg_data: captions_enabled"),y("captions_enabled",!c)},x=function(){e.setAttributes({lightbox_enabled:!n}),console.log("UPDATING envira_gallery_gutenberg_data: lightbox_enabled"),y("lightbox_enabled",!n)},k=function(l){e.setAttributes({columns:l}),console.log("UPDATING envira_gallery_gutenberg_data: columns"),y("columns",l)},C=function(l){e.setAttributes({galleryId:l.target.value}),console.log("UPDATING envira_gallery_gutenberg_data: galleryId"),y("galleryId",l.target.value)},A=function(l){e.setAttributes({sort_order:l}),console.log("UPDATING envira_gallery_gutenberg_data: sort_order"),y("sort_order",l)},I=function(l){e.setAttributes({lightbox_theme:l}),console.log("UPDATING envira_gallery_gutenberg_data: lightbox_theme"),y("lightbox_theme",l)},N=[_&&wp.element.createElement(g,null,wp.element.createElement(d,{title:s("Gallery"),className:"gb-envira-panelbody-gallery"},wp.element.createElement(p,{label:s("Select A Gallery"),value:t,options:enviragalleries.galleries,onChange:h,onFocus:console.log(enviragalleries)}),wp.element.createElement(p,{label:s("Layout"),value:a,options:[{value:"0",label:s("Automatic")},{value:"1",label:s("One Column")},{value:"2",label:s("Two Columns")},{value:"3",label:s("Three Columns")},{value:"4",label:s("Four Columns")},{value:"5",label:s("Five Columns")},{value:"6",label:s("Six Columns")}],onChange:k}),wp.element.createElement(m,{label:s("Enable Lazyload"),checked:r,onChange:w}),wp.element.createElement(m,{label:s("Enable Titles"),checked:o,onChange:f}),wp.element.createElement(m,{label:s("Enable Captions"),checked:c,onChange:E}),wp.element.createElement(p,{label:s("Sort By"),value:u,options:[{value:"0",label:s("Default")},{value:"1",label:s("Random")},{value:"date",label:s("Published Date")},{value:"title",label:s("Title")},{value:"caption",label:s("Caption")},{value:"alt",label:s("Alt")},{value:"filename",label:s("Filename")}],onChange:A})),wp.element.createElement(d,{title:s("Lightbox"),className:"gb-envira-panelbody-lightbox"},wp.element.createElement(m,{label:s("Enable Lightbox"),checked:n,onChange:x}),wp.element.createElement(p,{label:s("Lightbox Theme"),value:b,options:[{value:"base_dark",label:s("Base (Dark)")},{value:"base",label:s("Legacy")}],onChange:I})))];return 1==enviragalleries.error_not_installed?[N,wp.element.createElement(v,{key:"placeholder",className:"wp-block-embed envira-block__placeholder"},wp.element.createElement("div",{className:"envira-block__placeholder-brand"},wp.element.createElement("img",{src:"http://www.darkstardigital.co.uk/wp-content/uploads/2017/06/envira-gallery.jpg",width:"110"}),wp.element.createElement("p",null,"Envira Gallery Not Installed",wp.element.createElement("br",null),wp.element.createElement("small",null,wp.element.createElement("a",{href:"#"},"Click Here to Install And Activate Envira"),"."))))]:0==enviragalleries.galleries.length?[N,wp.element.createElement(v,{key:"placeholder",className:"wp-block-embed envira-block__placeholder"},wp.element.createElement("div",{className:"envira-block__placeholder-brand"},wp.element.createElement("img",{src:"http://www.darkstardigital.co.uk/wp-content/uploads/2017/06/envira-gallery.jpg",width:"110"}),wp.element.createElement("p",null,"No Published Galleries.",wp.element.createElement("br",null),wp.element.createElement("small",null,wp.element.createElement("a",{href:"#"},"Create A Gallery"),"."))))]:[N,wp.element.createElement(v,{key:"placeholder",className:"wp-block-embed envira-block__placeholder"},wp.element.createElement("div",{className:"envira-block__placeholder-brand"},i.a,wp.element.createElement("p",null,wp.element.createElement("strong",null,"Envira Gallery"))),wp.element.createElement("form",{className:"envira-gallery-gutenberg-form"},wp.element.createElement("select",{value:t,onChange:C},enviragalleries.galleries.map(function(e){return wp.element.createElement("option",{key:e.value,value:e.value},e.label)}))))]},save:function(e){var l=e.attributes.galleryId,t=JSON.stringify(e.attributes);console.log("Gutenberg Save Props"),console.log(e),console.log(e.attributes),console.log("galleryId"),console.log(l),console.log("...passing settings...."),console.log(t);var a="[envira-gallery id='"+l+"' type='gutenberg']";return console.log("shortcode"),console.log(a),l?wp.element.createElement(y,null,a):null}})},function(e,l){},function(e,l){},function(e,l,t){var a,n;!function(){"use strict";function t(){for(var e=[],l=0;l<arguments.length;l++){var a=arguments[l];if(a){var n=typeof a;if("string"===n||"number"===n)e.push(a);else if(Array.isArray(a)&&a.length){var o=t.apply(null,a);o&&e.push(o)}else if("object"===n)for(var i in a)r.call(a,i)&&a[i]&&e.push(i)}}return e.join(" ")}var r={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?(t["default"]=t,e.exports=t):(a=[],void 0!==(n=function(){return t}.apply(l,a))&&(e.exports=n))}()},function(e,l,t){"use strict";var a=wp.element.createElement("svg",function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({width:"20px",height:"20px",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},"viewBox","0 0 448 512"),wp.element.createElement("path",{fill:"#7abd4e",d:"M0 32c477.6 0 366.6 317.3 367.1 366.3L448 480h-26l-70.4-71.2c-39 4.2-124.4 34.5-214.4-37C47 300.3 52 214.7 0 32zm79.7 46c-49.7-23.5-5.2 9.2-5.2 9.2 45.2 31.2 66 73.7 90.2 119.9 31.5 60.2 79 139.7 144.2 167.7 65 28 34.2 12.5 6-8.5-28.2-21.2-68.2-87-91-130.2-31.7-60-61-118.6-144.2-158.1z"}));l.a=a},function(e,l,t){"use strict";var a=wp.element.createElement("svg",function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({width:"90px",height:"90px",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},"viewBox","0 0 448 512"),wp.element.createElement("path",{fill:"#7abd4e",d:"M0 32c477.6 0 366.6 317.3 367.1 366.3L448 480h-26l-70.4-71.2c-39 4.2-124.4 34.5-214.4-37C47 300.3 52 214.7 0 32zm79.7 46c-49.7-23.5-5.2 9.2-5.2 9.2 45.2 31.2 66 73.7 90.2 119.9 31.5 60.2 79 139.7 144.2 167.7 65 28 34.2 12.5 6-8.5-28.2-21.2-68.2-87-91-130.2-31.7-60-61-118.6-144.2-158.1z"}));l.a=a}]);